import{$ as z,A as Pe,Aa as Ze,B as ve,Ba as K,C as ke,Ca as H,D as Ee,Da as $e,E as w,F as S,G as De,H as C,I as y,J as oe,K as O,L as P,M as s,N as a,O as F,P as h,Q as g,R as m,S as Fe,T as Ne,U as Te,V as l,W as V,X as ne,Y as N,Z as T,_ as I,a as be,aa as Ie,c as ee,d as te,da as Re,e as G,ea as he,f as R,fa as ie,g as fe,ga as Ae,h as A,ha as Le,i as J,ia as Ve,j as L,k as Ce,l as Q,la as _,m as ye,ma as ze,n as ge,na as je,o as M,oa as We,p as xe,pa as re,q as u,qa as Ue,r as f,ra as Be,s as we,sa as Ke,t as Me,ta as He,u as x,ua as ae,v as Se,va as Ye,w as d,wa as j,x as b,xa as W,y as v,ya as U,z as Oe,za as B}from"./chunk-KSWCHTVU.js";var Y=class i{normalize(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}calculateScore(t,e){if(t=this.normalize(t),e=this.normalize(e),e===t)return 1;if(e.startsWith(t))return .9;let o=0,n=0,r=-1,c=0;for(let p=0;p<e.length&&c<t.length;p++)e[p]===t[c]&&(o+=.1,r===p-1?(n++,o+=n*.05):n=0,(p===0||e[p-1]===" ")&&(o+=.2),r=p,c++);return c<t.length&&(o-=(t.length-c)*.1),Math.max(0,Math.min(1,o))}search(t,e,o={}){let{threshold:n=.3,limit:r=10}=o;return t?e.map(p=>({item:p,score:this.calculateScore(t,p)})).filter(p=>p.score>=n).sort((p,E)=>E.score-p.score).slice(0,r).map(p=>p.item):[]}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Q({token:i,factory:i.\u0275fac,providedIn:"root"})};var it=()=>[re,import("./chunk-T5AQNDS7.js").then(i=>i.FoodCardComponent)],rt=()=>["/foods/add"],at=i=>({food:i}),st=(i,t)=>t.id;function ct(i,t){if(i&1&&(s(0,"div",3),l(1),a()),i&2){let e=m();d(),V(e.foods.error())}}function dt(i,t){i&1&&(s(0,"div",4),l(1,"Loading foods..."),a())}function lt(i,t){if(i&1&&F(0,"app-food-card",7),i&2){let e=t.$implicit;w("food",e)}}function pt(i,t){if(i&1&&(s(0,"div",5),O(1,lt,1,1,"app-food-card",7,st),a()),i&2){let e=m(2);d(),P(e.displayedFoods())}}function mt(i,t){if(i&1&&(s(0,"a",8),l(1),a()),i&2){let e=m(3);w("routerLink",z(3,rt))("queryParams",Ie(4,at,e.searchTerm())),d(),ne('Add "',e.searchTerm(),'"')}}function ut(i,t){if(i&1&&(s(0,"div",6),l(1," No foods found matching your search. "),C(2,mt,2,6,"a",8),a()),i&2){let e=m(2);d(2),y(e.searchTerm()?2:-1)}}function ft(i,t){if(i&1&&C(0,pt,3,0,"div",5)(1,ut,3,1,"div",6),i&2){let e=m();y(e.filteredFoods().length>0?0:1)}}var se=class i{storage=M(H);fuzzySearch=M(Y);searchTerm=x("");foods=this.storage.foods;filteredFoods=he(()=>{let t=this.searchTerm(),e=this.foods.value();if(!t)return e.sort((r,c)=>c.dateUpdated.getTime()-r.dateUpdated.getTime());let o=e.map(r=>r.name),n=this.fuzzySearch.search(t,o,{threshold:.3});return e.filter(r=>n.includes(r.name)).sort((r,c)=>c.dateUpdated.getTime()-r.dateUpdated.getTime())});displayedFoods=he(()=>this.filteredFoods().slice(0,30));onSearch(t){this.searchTerm.set(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-food-list"]],decls:8,vars:4,consts:[[1,"food-list-container"],[1,"search-container"],["type","text","placeholder","Search",1,"search-input",3,"ngModelChange","ngModel","disabled"],[1,"error-message"],[1,"loading-message"],[1,"food-list"],[1,"no-foods-message"],[3,"food"],[3,"routerLink","queryParams"]],template:function(e,o){e&1&&(s(0,"div",0)(1,"div",1)(2,"input",2),g("ngModelChange",function(r){return o.onSearch(r)}),a()(),C(3,ct,2,1,"div",3),C(4,dt,2,0,"div",4),Oe(5,ft,2,1),ke(6,5,it),Ee(),a()),e&2&&(d(2),w("ngModel",o.searchTerm())("disabled",o.foods.isLoading()),d(),y(o.foods.error()?3:-1),d(),y(o.foods.isLoading()?4:-1))},dependencies:[_,B,j,W,U,ae],styles:[".food-list-container[_ngcontent-%COMP%]{padding:1rem}.search-container[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background:var(--bg-primary);padding:.5rem;margin:-.5rem -.5rem 1rem;box-shadow:0 2px 4px #0000001a}.search-input[_ngcontent-%COMP%]{width:100%;padding:1rem;border:2px solid var(--input-border);border-radius:8px;transition:all .2s ease;appearance:none;background-color:var(--input-bg);color:var(--text-primary)}.search-input[_ngcontent-%COMP%]:disabled{background-color:var(--bg-secondary);cursor:not-allowed}.search-input[_ngcontent-%COMP%]:focus{border-color:var(--text-accent);outline:none;box-shadow:0 0 0 3px #007bff40}@media (hover: none){.search-input[_ngcontent-%COMP%]{font-size:16px}}.food-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:100%}.loading-message[_ngcontent-%COMP%], .no-foods-message[_ngcontent-%COMP%]{text-align:center;padding:clamp(1rem,4vw,2rem);color:var(--text-secondary);font-size:clamp(.875rem,2.5vw,1rem)}.no-foods-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;margin-top:.5rem;color:var(--text-accent);text-decoration:none;font-weight:500}.no-foods-message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};function vt(i,t){if(i&1){let e=h();s(0,"button",9),g("click",function(){u(e);let n=m();return f(n.clearData())}),l(1,"Click again to confirm"),a()}}function ht(i,t){if(i&1){let e=h();s(0,"button",9),g("click",function(){u(e);let n=m();return f(n.confirmClear())}),l(1,"Clear All Data"),a()}}var ce=class i{constructor(t,e){this.storage=t;this.notificationService=e}isConfirming=x(!1);clearDataTimeout=null;ngOnDestroy(){this.clearDataTimeout&&(clearTimeout(this.clearDataTimeout),this.clearDataTimeout=null)}async exportData(){try{let t=await this.storage.exportData(),e=new Blob([t],{type:"application/json"}),o=window.URL.createObjectURL(e),n=document.createElement("a"),r=new Date().toISOString().split("T")[0];n.href=o,n.download=`histaminer-export-${r}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(o)}catch(t){throw console.error("Export failed:",t),t}}handleImport(t){let e=t.target,o=e?.files?.[0];if(!o)return;let n=new FileReader;n.onload=async r=>{try{let c=JSON.parse(r.target?.result);this.isValidExportFile(c)?(await this.storage.importData(c.data),this.notificationService.show("Data imported successfully","success"),e.value=""):(this.notificationService.show("Invalid import file format","error"),e.value="")}catch{this.notificationService.show("Error reading import file","error"),e.value=""}},n.readAsText(o)}confirmClear(){this.isConfirming.set(!0)}async clearData(){try{await this.storage.clearAllData(),this.notificationService.show("All data has been cleared","success",3e3),this.isConfirming.set(!1)}catch(t){this.notificationService.show(`Error clearing data: ${t.message}`,"error")}finally{this.isConfirming.set(!1)}}isValidExportFile(t){return t&&t.metadata&&t.data&&Array.isArray(t.data.foods)&&t.data.foods.every(e=>e.id&&e.name&&Array.isArray(e.interactions))}static \u0275fac=function(e){return new(e||i)(b(H),b(K))};static \u0275cmp=v({type:i,selectors:[["app-settings"]],decls:26,vars:1,consts:[["fileInput",""],[1,"settings-container"],[1,"settings-section"],[1,"settings-actions"],[1,"action-card"],[1,"btn","btn-primary",3,"click"],["type","file","accept",".json",1,"file-input",3,"change"],[1,"action-card","danger-zone"],[1,"btn","btn-danger"],[1,"btn","btn-danger",3,"click"]],template:function(e,o){if(e&1){let n=h();s(0,"div",1)(1,"section",2)(2,"div",3)(3,"div",4)(4,"h4"),l(5,"Export Data"),a(),s(6,"p"),l(7,"Download all your food and reaction data as a JSON file"),a(),s(8,"button",5),g("click",function(){return u(n),f(o.exportData())}),l(9," Export Data "),a()(),s(10,"div",4)(11,"h4"),l(12,"Import Data"),a(),s(13,"p"),l(14,"Import previously exported data from a JSON file"),a(),s(15,"input",6,0),g("change",function(c){return u(n),f(o.handleImport(c))}),a(),s(17,"button",5),g("click",function(){u(n);let c=Te(16);return f(c.click())}),l(18," Import Data "),a()(),s(19,"div",7)(20,"h4"),l(21,"Clear All Data"),a(),s(22,"p"),l(23,"Remove all stored foods and reactions. This action cannot be undone!"),a(),C(24,vt,2,0,"button",8)(25,ht,2,0,"button",8),a()()()()}e&2&&(d(24),y(o.isConfirming()?24:25))},dependencies:[_],styles:[".settings-container[_ngcontent-%COMP%]{padding:clamp(1rem,3vw,2rem);max-width:min(100%,800px);margin:0 auto}h2[_ngcontent-%COMP%]{font-size:clamp(1.5rem,4vw,2rem);margin-bottom:2rem;color:var(--text-primary)}h3[_ngcontent-%COMP%]{font-size:clamp(1.25rem,3vw,1.5rem);color:var(--text-secondary);margin-bottom:1rem}.settings-section[_ngcontent-%COMP%]{background:var(--card-bg);border-radius:8px;padding:clamp(1rem,3vw,2rem);box-shadow:0 2px 4px #0000001a}.settings-actions[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.action-card[_ngcontent-%COMP%]{padding:1.5rem;border:1px solid var(--border-color);border-radius:8px;background:var(--bg-secondary)}.action-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:clamp(1rem,2.5vw,1.25rem);margin:0 0 .5rem;color:var(--text-primary)}.action-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:1rem;font-size:clamp(.875rem,2vw,1rem)}.danger-zone[_ngcontent-%COMP%]{border-color:#dc3545}.file-input[_ngcontent-%COMP%]{display:none}@media (min-width: 768px){.settings-actions[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(300px,1fr))}}"]})};var _t=["autoInput"];function bt(i,t){if(i&1){let e=h();s(0,"div",5),g("click",function(){let n=u(e).$implicit,r=m(2);return f(r.onClick(n))}),s(1,"strong"),l(2),a(),l(3),a()}if(i&2){let e=t.$implicit,o=t.$index,n=m(2);S("autocomplete-active",o===n.currentFocus),d(2),V(e.substring(0,n.foodName().length)),d(),ne(" ",e.substring(n.foodName().length)," ")}}function Ct(i,t){if(i&1&&(s(0,"div",3),O(1,bt,4,4,"div",4,oe),a()),i&2){let e=m();d(),P(e.filteredSuggestions)}}var de=class i{constructor(t){this.fuzzySearch=t}suggestions=ie([]);inputElement=Ae("autoInput");foodName=Le("");currentFocus=-1;showSuggestions=!1;filteredSuggestions=[];onInput(){if(this.showSuggestions=!0,this.currentFocus=-1,!this.foodName()){this.filteredSuggestions=[];return}this.filteredSuggestions=this.fuzzySearch.search(this.foodName(),this.suggestions(),{threshold:.3,limit:10})}onClick(t){this.foodName.set(t),this.showSuggestions=!1}onKeyDown(t){this.showSuggestions&&(t.key==="ArrowDown"?(this.currentFocus++,this.currentFocus>=this.filteredSuggestions.length&&(this.currentFocus=0)):t.key==="ArrowUp"?(this.currentFocus--,this.currentFocus<0&&(this.currentFocus=this.filteredSuggestions.length-1)):t.key==="Enter"&&(t.preventDefault(),this.currentFocus>-1&&this.onClick(this.filteredSuggestions[this.currentFocus])))}static \u0275fac=function(e){return new(e||i)(b(Y))};static \u0275cmp=v({type:i,selectors:[["app-food-autocomplete"]],viewQuery:function(e,o){e&1&&Fe(o.inputElement,_t,5),e&2&&Ne()},inputs:{suggestions:[1,"suggestions"],foodName:[1,"foodName"]},outputs:{foodName:"foodNameChange"},decls:4,vars:2,consts:[["autoInput",""],[1,"autocomplete"],["type","text","placeholder","Search",3,"ngModelChange","input","keydown","ngModel"],[1,"autocomplete-items"],[3,"autocomplete-active"],[3,"click"]],template:function(e,o){if(e&1){let n=h();s(0,"div",1)(1,"input",2,0),I("ngModelChange",function(c){return u(n),T(o.foodName,c)||(o.foodName=c),f(c)}),g("input",function(){return u(n),f(o.onInput())})("keydown",function(c){return u(n),f(o.onKeyDown(c))}),a(),C(3,Ct,3,0,"div",3),a()}e&2&&(d(),N("ngModel",o.foodName),d(2),y(o.showSuggestions?3:-1))},dependencies:[_,B,j,W,U],styles:[".autocomplete[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100%}.autocomplete[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:1rem;font-size:1rem;border:2px solid var(--input-border);border-radius:8px;background-color:var(--input-bg);color:var(--text-primary);transition:border-color .2s ease;appearance:none}.autocomplete[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--text-accent)}.autocomplete-items[_ngcontent-%COMP%]{position:absolute;border:1px solid var(--border-color);border-radius:0 0 4px 4px;border-top:none;z-index:99;top:100%;left:0;right:0;max-height:250px;overflow-y:auto;background-color:var(--bg-primary);box-shadow:0 2px 4px #0000001a}.autocomplete-items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:10px;cursor:pointer;color:var(--text-primary);transition:background-color .2s ease}.autocomplete-items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:var(--hover-bg)}.autocomplete-active[_ngcontent-%COMP%]{background-color:var(--hover-bg)!important;color:var(--text-primary)!important}"]})};var yt=()=>[1,2,3,4,5];function xt(i,t){if(i&1){let e=h();s(0,"button",10),g("click",function(){let n=u(e).$implicit,r=m();return f(r.onSeverityChange(n))}),F(1,"app-shield-icon",11),a()}if(i&2){let e=t.$implicit,o=m();S("active",o.severity()===e),d(),w("severity",e)("size",32)}}function wt(i,t){if(i&1){let e=h();s(0,"div",6)(1,"label",12)(2,"input",13),I("ngModelChange",function(n){u(e);let r=m();return T(r.isImmediateReaction,n)||(r.isImmediateReaction=n),f(n)}),g("ngModelChange",function(){u(e);let n=m();return f(n.onReactionTypeClick())}),a(),s(3,"span"),l(4,"\u{1F534} Immediate"),a()(),s(5,"label",14)(6,"input",13),I("ngModelChange",function(n){u(e);let r=m();return T(r.isDelayedReaction,n)||(r.isDelayedReaction=n),f(n)}),g("ngModelChange",function(){u(e);let n=m();return f(n.onReactionTypeClick())}),a(),s(7,"span"),l(8,"\u23F0 Delayed"),a()()()}if(i&2){let e=m();d(),S("active",e.isImmediateReaction()),d(),N("ngModel",e.isImmediateReaction),d(3),S("active",e.isDelayedReaction()),d(),N("ngModel",e.isDelayedReaction)}}var le=class i{constructor(t,e,o){this.storage=t;this.router=e;this.notificationService=o;this.foodNames=this.storage.foodNames}food=ie();foodName=x("");notes=x("");isImmediateReaction=x(!1);isDelayedReaction=x(!1);severity=x(1);foodNames;ReactionSeverity=Ze;ngOnInit(){let t=this.food();t?.trim()&&this.foodName.set(t)}onReactionTypeClick(){(this.isImmediateReaction()||this.isDelayedReaction())&&this.severity()===1&&this.severity.set(3)}onSeverityChange(t){this.severity.set(t),t===1?(this.isImmediateReaction.set(!1),this.isDelayedReaction.set(!1)):!this.isImmediateReaction()&&!this.isDelayedReaction()&&this.isImmediateReaction.set(!0)}hasAnyReactions(){return this.severity()!==1}async saveFood(){if(!this.foodName().trim()){this.notificationService.show("Food name is required","error");return}let t={id:crypto.randomUUID(),date:new Date,reacted:this.hasAnyReactions(),isImmediateReaction:this.isImmediateReaction(),isDelayedReaction:this.isDelayedReaction(),severity:this.severity(),notes:this.hasAnyReactions()?this.notes().trim():void 0};try{let e=this.storage.foods.value().find(o=>o.name.toLowerCase()===this.foodName().trim().toLowerCase());if(e)e.interactions.push(t),e.dateUpdated=new Date,await this.storage.updateFood(e),this.notificationService.show("Interaction added to existing food","success");else{let o={id:crypto.randomUUID(),name:this.foodName(),dateAdded:new Date,dateUpdated:new Date,interactions:[t]};await this.storage.addFood(o),this.notificationService.show("New food added successfully","success")}this.router.navigate(["/foods"])}catch(e){this.notificationService.show("Error saving food: "+e.message,"error")}}static \u0275fac=function(e){return new(e||i)(b(H),b(We),b(K))};static \u0275cmp=v({type:i,selectors:[["app-add-food"]],inputs:{food:[1,"food"]},decls:12,vars:6,consts:[[1,"add-food-container"],[3,"foodNameChange","suggestions","foodName"],[1,"reaction-options"],[1,"severity-options"],[1,"severity-buttons"],["type","button",1,"severity-button",3,"active"],[1,"reaction-type"],[1,"notes-container"],["id","reaction-notes","placeholder","Notes...","rows","3",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-success",3,"click","disabled"],["type","button",1,"severity-button",3,"click"],[3,"severity","size"],[1,"reaction-button","immediate"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"reaction-button","delayed"]],template:function(e,o){e&1&&(s(0,"div",0)(1,"app-food-autocomplete",1),I("foodNameChange",function(r){return T(o.foodName,r)||(o.foodName=r),r}),a(),s(2,"div",2)(3,"div",3)(4,"div",4),O(5,xt,2,4,"button",5,oe),a()(),C(7,wt,9,6,"div",6),a(),s(8,"div",7)(9,"textarea",8),I("ngModelChange",function(r){return T(o.notes,r)||(o.notes=r),r}),a()(),s(10,"button",9),g("click",function(){return o.saveFood()}),l(11,"Save Food Entry"),a()()),e&2&&(d(),w("suggestions",o.foodNames()),N("foodName",o.foodName),d(4),P(z(5,yt)),d(2),y(o.severity()>o.ReactionSeverity.NONE?7:-1),d(2),N("ngModel",o.notes),d(),w("disabled",!o.foodName().trim()))},dependencies:[_,B,j,Ye,W,U,de,$e],styles:['.add-food-container[_ngcontent-%COMP%]{padding:1rem;display:flex;flex-direction:column;gap:1rem}.food-name-input[_ngcontent-%COMP%]{width:100%;padding:1rem;font-size:1.2rem;border:2px solid var(--input-border);border-radius:12px;transition:border-color .3s;background:var(--input-bg);color:var(--text-primary)}.food-name-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--text-accent)}.reaction-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;gap:1rem}.reaction-type[_ngcontent-%COMP%]{display:flex;gap:1rem}.reaction-button[_ngcontent-%COMP%]{flex:1;position:relative;display:flex;justify-content:center;align-items:center;padding:1rem;border:2px solid var(--input-border);border-radius:12px;background:var(--card-bg);cursor:pointer;transition:all .2s ease}.reaction-button[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;opacity:0;width:0;height:0}.reaction-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.1rem;white-space:nowrap}.reaction-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 2px 4px #0000001a}.reaction-button.active[_ngcontent-%COMP%]{border-color:var(--text-accent);background:var(--input-bg);box-shadow:0 2px 4px #0003}.reaction-button.no-reaction.active[_ngcontent-%COMP%]{border-color:#51cf66;color:#51cf66}.reaction-button.immediate.active[_ngcontent-%COMP%]{border-color:#fd7e14;color:#fd7e14}.reaction-button.delayed.active[_ngcontent-%COMP%]{border-color:#ffd43b;color:#ffd43b}.reaction-button.both.active[_ngcontent-%COMP%]{border-color:#fa5252;color:#fa5252}.select-multiple-hint[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;margin:0 0 .5rem;text-align:center;font-style:italic}.reaction-type-label[_ngcontent-%COMP%]{position:relative;padding:1rem;border:2px solid var(--input-border);background:var(--card-bg);border-radius:12px;font-size:1rem;cursor:pointer;transition:all .3s;display:flex;align-items:center;gap:.75rem;color:var(--text-primary)}.reaction-type-label[_ngcontent-%COMP%]:hover{border-color:var(--text-accent)}.reaction-type-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}.checkbox-custom[_ngcontent-%COMP%]{width:24px;height:24px;border:2px solid var(--input-border);border-radius:6px;display:inline-block;position:relative;transition:all .3s}.checkbox-custom[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none;left:7px;top:3px;width:6px;height:12px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.reaction-type-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkbox-custom[_ngcontent-%COMP%]{background-color:var(--text-accent);border-color:var(--text-accent)}.reaction-type-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkbox-custom[_ngcontent-%COMP%]:after{display:block}.reaction-type-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked ~ span[_ngcontent-%COMP%]:last-child{color:var(--text-accent)}.reaction-types[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1rem;border:2px solid var(--input-border);background:var(--card-bg);border-radius:12px;font-size:1rem;cursor:pointer;transition:all .3s;color:var(--text-primary)}.reaction-types[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:var(--text-accent);color:#fff;border-color:var(--text-accent)}.notes-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.notes-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.notes-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:2px solid var(--input-border);border-radius:8px;background:var(--input-bg);color:var(--text-primary);resize:vertical;min-height:80px;font-family:inherit;transition:border-color .3s}.notes-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--text-accent)}.severity-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1rem;border:2px solid var(--input-border);border-radius:12px;background:var(--card-bg)}.severity-label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-primary)}.severity-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center}.severity-button[_ngcontent-%COMP%]{background:none;border:2px solid transparent;border-radius:8px;padding:.5rem;cursor:pointer;transition:all .2s ease}.severity-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);background:var(--bg-secondary)}.severity-button.active[_ngcontent-%COMP%]{border-color:var(--text-accent);background:var(--bg-secondary)}.severity-description[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-size:.9rem}@media (min-width: 768px){.reaction-types[_ngcontent-%COMP%]{flex-direction:row}.reaction-type-label[_ngcontent-%COMP%]{flex:1}}']})};var Xe=[{path:"",redirectTo:"foods",pathMatch:"full"},{path:"foods",component:se},{path:"foods/add",component:le},{path:"settings",component:ce}];var _e="Service workers are disabled or not supported by this browser",$=class{serviceWorker;worker;registration;events;constructor(t,e){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=new ee(o=>o.error(new L(5601,!1)));else{let o=null,n=new te;this.worker=new ee(D=>(o!==null&&D.next(o),n.subscribe(q=>D.next(q))));let r=()=>{let{controller:D}=t;D!==null&&(o=D,n.next(o))};t.addEventListener("controllerchange",r),r(),this.registration=this.worker.pipe(J(()=>t.getRegistration()));let c=new te;this.events=c.asObservable();let p=D=>{let{data:q}=D;q?.type&&c.next(q)};t.addEventListener("message",p),e?.get(ve,null,{optional:!0})?.onDestroy(()=>{t.removeEventListener("controllerchange",r),t.removeEventListener("message",p)})}}postMessage(t,e){return new Promise(o=>{this.worker.pipe(A(1)).subscribe(n=>{n.postMessage(be({action:t},e)),o()})})}postMessageWithOperation(t,e,o){let n=this.waitForOperationCompleted(o),r=this.postMessage(t,e);return Promise.all([r,n]).then(([,c])=>c)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let e;return typeof t=="string"?e=o=>o.type===t:e=o=>t.includes(o.type),this.events.pipe(fe(e))}nextEventOfType(t){return this.eventsOfType(t).pipe(A(1))}waitForOperationCompleted(t){return new Promise((e,o)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(fe(n=>n.nonce===t),A(1),G(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).subscribe({next:e,error:o})})}get isEnabled(){return!!this.serviceWorker}},Mt=(()=>{class i{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new te;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=R,this.notificationClicks=R,this.subscription=R;return}this.messages=this.sw.eventsOfType("PUSH").pipe(G(n=>n.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(G(n=>n.data)),this.pushManager=this.sw.registration.pipe(G(n=>n.pushManager));let o=this.pushManager.pipe(J(n=>n.getSubscription()));this.subscription=new ee(n=>{let r=o.subscribe(n),c=this.subscriptionChanges.subscribe(n);return()=>{r.unsubscribe(),c.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(_e));let o={userVisibleOnly:!0},n=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),r=new Uint8Array(new ArrayBuffer(n.length));for(let c=0;c<n.length;c++)r[c]=n.charCodeAt(c);return o.applicationServerKey=r,new Promise((c,p)=>{this.pushManager.pipe(J(E=>E.subscribe(o)),A(1)).subscribe({next:E=>{this.subscriptionChanges.next(E),c(E)},error:p})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(_e));let e=o=>{if(o===null)throw new L(5602,!1);return o.unsubscribe().then(n=>{if(!n)throw new L(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((o,n)=>{this.subscription.pipe(A(1),J(e)).subscribe({next:o,error:n})})}decodeBase64(e){return atob(e)}static \u0275fac=function(o){return new(o||i)(ge($))};static \u0275prov=Q({token:i,factory:i.\u0275fac})}return i})(),St=(()=>{class i{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=R,this.unrecoverable=R;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(_e));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new L(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(o){return new(o||i)(ge($))};static \u0275prov=Q({token:i,factory:i.\u0275fac})}return i})();var et=new ye("");function Ot(){let i=M(X);if(!("serviceWorker"in navigator&&i.enabled!==!1))return;let t=M(et),e=M(Se),o=M(ve);e.runOutsideAngular(()=>{let n=navigator.serviceWorker,r=()=>n.controller?.postMessage({action:"INITIALIZE"});n.addEventListener("controllerchange",r),o.onDestroy(()=>{n.removeEventListener("controllerchange",r)})}),e.runOutsideAngular(()=>{let n,{registrationStrategy:r}=i;if(typeof r=="function")n=new Promise(c=>r().subscribe(()=>c()));else{let[c,...p]=(r||"registerWhenStable:30000").split(":");switch(c){case"registerImmediately":n=Promise.resolve();break;case"registerWithDelay":n=qe(+p[0]||0);break;case"registerWhenStable":n=Promise.race([o.whenStable(),qe(+p[0])]);break;default:throw new L(5600,!1)}}n.then(()=>navigator.serviceWorker.register(t,{scope:i.scope}).catch(c=>console.error(Ce(5604,!1))))})}function qe(i){return new Promise(t=>setTimeout(t,i))}function Pt(i,t){return new $(i.enabled!==!1?navigator.serviceWorker:void 0,t)}var X=class{enabled;scope;registrationStrategy};function tt(i,t={}){return xe([Mt,St,{provide:et,useValue:i},{provide:X,useValue:t},{provide:$,useFactory:Pt,deps:[X,we]},Pe(Ot)])}var ot={providers:[Me(),Re(),Be(Xe,He(),Ke()),tt("ngsw-worker.js",{enabled:!Ve(),registrationStrategy:"registerWhenStable:30000"})]};var kt=()=>({exact:!0}),pe=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-navigation"]],decls:8,vars:2,consts:[[1,"nav-container"],[1,"nav-content"],["routerLink","/foods","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/foods/add","routerLinkActive","active"],["routerLink","/settings","routerLinkActive","active"]],template:function(e,o){e&1&&(s(0,"nav",0)(1,"div",1)(2,"a",2),l(3," Food List "),a(),s(4,"a",3),l(5," Add Food "),a(),s(6,"a",4),l(7," Settings "),a()()()),e&2&&(d(2),w("routerLinkActiveOptions",z(1,kt)))},dependencies:[_,ae,re,Ue],styles:[".nav-container[_ngcontent-%COMP%]{background-color:var(--bg-secondary);border-bottom:1px solid var(--border-color);padding:.5rem 1rem;position:sticky;top:0;z-index:1000}.nav-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem}a[_ngcontent-%COMP%]{color:var(--text-secondary);text-decoration:none;padding:.5rem 1rem;border-radius:4px;transition:all .2s ease}a[_ngcontent-%COMP%]:hover{background-color:var(--hover-bg)}a.active[_ngcontent-%COMP%]{color:var(--text-accent);background-color:var(--hover-bg)}"]})};var Et=(i,t)=>t.id;function Dt(i,t){if(i&1){let e=h();s(0,"div",2)(1,"div",3),l(2),a(),s(3,"button",4),g("click",function(){let n=u(e).$implicit,r=m();return f(r.notificationService.close(n.id))}),l(4," \xD7 "),a()()}if(i&2){let e=t.$implicit;De(e.type),S("removing",e.removing),d(2),V(e.message)}}var me=class i{constructor(t){this.notificationService=t}static \u0275fac=function(e){return new(e||i)(b(K))};static \u0275cmp=v({type:i,selectors:[["app-notification-toast"]],decls:3,vars:0,consts:[["aria-live","polite",1,"notification-container"],["role","alert",1,"notification-toast",3,"class","removing"],["role","alert",1,"notification-toast"],[1,"notification-content"],["aria-label","Close notification",1,"close-button",3,"click"]],template:function(e,o){e&1&&(s(0,"div",0),O(1,Dt,5,5,"div",1,Et),a()),e&2&&(d(),P(o.notificationService.notifications()))},dependencies:[_],styles:[".notification-container[_ngcontent-%COMP%]{position:fixed;top:1rem;right:1rem;z-index:9999;display:flex;flex-direction:column;gap:.5rem;pointer-events:none}.notification-toast[_ngcontent-%COMP%]{padding:1rem;border-radius:4px;box-shadow:0 4px 6px #0000001a;animation:_ngcontent-%COMP%_slideIn .3s ease-out forwards;min-width:250px;max-width:350px;opacity:1;pointer-events:auto;display:flex;align-items:flex-start;gap:.5rem}.notification-content[_ngcontent-%COMP%]{flex:1}.close-button[_ngcontent-%COMP%]{background:none;border:none;padding:0;margin:0;font-size:1.5rem;line-height:1;cursor:pointer;opacity:.6;transition:opacity .2s ease}.close-button[_ngcontent-%COMP%]:hover{opacity:1}.notification-toast.success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724;border-left:4px solid #28a745}.notification-toast.error[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24;border-left:4px solid #dc3545}.notification-toast[_ngcontent-%COMP%]{--slide-transform: translateX(120%)}@media (max-width: 768px){.notification-container[_ngcontent-%COMP%]{top:auto;bottom:1rem;right:1rem;left:1rem}.notification-toast[_ngcontent-%COMP%]{width:100%;max-width:none;--slide-transform: translateY(120%)}}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:var(--slide-transform);opacity:0}to{transform:translate(0);opacity:1}}.notification-toast.removing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOut .3s ease-in forwards}@keyframes _ngcontent-%COMP%_slideOut{0%{transform:translate(0);opacity:1}to{transform:var(--slide-transform);opacity:0}}"]})};var ue=class i{title="histaminer";static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-root"]],decls:4,vars:0,template:function(e,o){e&1&&(F(0,"app-notification-toast")(1,"app-navigation"),s(2,"main"),F(3,"router-outlet"),a())},dependencies:[je,pe,me],encapsulation:2})};ze(ue,ot).catch(i=>console.error(i));
